<?php
// $Id$

/**
 * Test the organic groups content handeling.
 */
class OgContentTest extends DrupalWebTestCase {

  public static function getInfo() {
    return array(
      'name' => 'Organic groups content',
      'description' => 'Test the organic groups content handeling.',
      'group' => 'Organic groups',
    );
  }

  function setUp() {
    parent::setUp('og');
    $admin_user = $this->drupalCreateUser(array('administer nodes', 'administer content types'));
    $this->drupalLogin($admin_user);
    $this->uid = $admin_user->uid;
    
    // Create group content type.
    $this->group_type = $this->drupalCreateContentType(array('og_content_type_usage' => 'group'));    
    
    // Create post content type.
    $this->group_post_type = $this->drupalCreateContentType(array('og_content_type_usage' => 'group post'));
  }

  
  function testOgContent() {   
    $this->assertContentTypes();
  }
  
  function assertContentTypes() {
  	// Assert group fields were added to the content type.
  	$this->drupalGet('node/add/'. $this->group_type);
  	$this->assertText(t('Groups selective'), t('Groups selective field was found.'));
  	
    // Assert group post fields were added to the content type.
    $this->drupalGet('node/add/'. $this->group_post_type);
    $this->assertText(t('Groups audience'), t('Groups audience field was found.'));  	
  }
}